#!/bin/bash

set -euo pipefail

resolve_package_name() {
	local logical="${1}"
	local pkg="${logical}"

	echo "${pkg}"
}

install_package() {
    local pkg="$1"

    if command -v apt-get >/dev/null 2>&1; then
        sudo apt-get update -y
        sudo apt-get install -y "$pkg"
        return
    fi

    if command -v dnf >/dev/null 2>&1; then
        sudo dnf install -y "$pkg"
        return
    fi

    if command -v yum >/dev/null 2>&1; then
        sudo yum install -y "$pkg"
        return
    fi

    if command -v pacman >/dev/null 2>&1; then
        sudo pacman -Sy --noconfirm "$pkg"
        return
    fi

    if command -v zypper >/dev/null 2>&1; then
        sudo zypper install -y "$pkg"
        return
    fi

    if command -v apk >/dev/null 2>&1; then
        sudo apk add "$pkg"
        return
    fi

	echo >&2 "ERROR: No supported package manager found."
    return 1
}

pkg="$(resolve_package_name ${1})"
shift

install_package "${pkg}"
